# User Management System

## 프로젝트 개요
이 프로젝트는 **Spring Framework**를 사용하여 사용자 데이터를 관리하고, 사용자의 활동에 따라 등급(Level)을 업그레이드하는 시스템을 구현한 예시입니다. 데이터베이스를 이용하여 사용자 정보를 저장하고, 로그인 횟수와 추천 횟수에 따라 자동으로 등급이 변경됩니다.

## 주요 기능
- **사용자 추가**: 새 사용자를 데이터베이스에 추가.
- **사용자 정보 조회**: 사용자 ID를 기반으로 데이터를 조회.
- **사용자 등급 업데이트**: 사용자의 로그인 횟수 또는 추천 횟수에 따라 등급을 자동으로 업그레이드.
- **이메일 알림 전송**: 사용자의 등급이 업그레이드될 때 이메일 알림을 전송.
- **트랜잭션 관리**: 사용자 데이터 업데이트 시 트랜잭션 처리를 통해 데이터 일관성 유지.

## 클래스 및 인터페이스 설명

### 1. `UserDao`
사용자 정보를 데이터베이스에 저장, 수정, 삭제, 조회하는 역할을 담당하는 인터페이스입니다.

#### 주요 메서드:
- `add(User user)`: 새로운 사용자 추가.
- `get(String id)`: ID를 기반으로 사용자 조회.
- `getAll()`: 모든 사용자 정보 조회.
- `deleteAll()`: 모든 사용자 정보 삭제.
- `getCount()`: 사용자 수 조회.
- `update(User user)`: 사용자 정보 업데이트.

### 2. `UserDaoJdbc`
`UserDao` 인터페이스를 구현한 클래스입니다. `JdbcTemplate`을 사용하여 데이터베이스와의 상호작용을 처리합니다.

### 3. `Level`
사용자의 등급을 나타내는 열거형(enum) 클래스입니다.
- **BASIC**, **SILVER**, **GOLD**의 세 가지 등급이 있으며, 각 등급은 특정 조건에 따라 상위 등급으로 업그레이드될 수 있습니다.

### 4. `User`
사용자 정보를 저장하는 도메인 클래스입니다. 사용자 ID, 이름, 비밀번호, 이메일, 등급, 로그인 횟수, 추천 횟수 등의 정보를 포함합니다.

### 5. `UserService`
사용자 추가 및 등급 업그레이드 관련 로직을 정의한 인터페이스입니다.

### 6. `UserServiceImpl`
`UserService`의 구현체로, 사용자 등급 업그레이드 로직과 이메일 전송 기능을 포함합니다.
- 사용자의 로그인 횟수와 추천 횟수를 기준으로 등급을 자동으로 업그레이드합니다.
- 등급이 업그레이드되면 이메일로 사용자에게 알림을 전송합니다.

### 7. `UserServiceTx`
트랜잭션 관리를 위한 서비스 클래스입니다. `UserService`의 메서드 호출 시 트랜잭션을 시작하고, 예외 발생 시 롤백 처리합니다.

### 8. `DummyMailSender` 및 `MailSenderCVImpl`
이메일 전송을 위한 목적으로 구현된 메일 전송 인터페이스 및 클래스입니다.
- **DummyMailSender**: 실제 메일 전송 없이 테스트 목적의 빈 구현체.
- **MailSenderCVImpl**: JavaMail을 이용하여 실제 메일 전송 설정을 적용한 구현체.

## 프로젝트 설정

### 1. 데이터베이스
이 프로젝트는 **JDBC**를 사용하여 데이터베이스와 통신합니다. `JdbcTemplate`을 활용하여 SQL 쿼리를 실행하고 결과를 처리합니다.

### 2. 트랜잭션 관리
`UserServiceTx` 클래스는 트랜잭션을 관리하며, `PlatformTransactionManager`를 사용하여 트랜잭션을 제어합니다.

### 3. 이메일 전송
이메일 전송 기능은 Spring의 `MailSender` 인터페이스를 사용하여 구현되었으며, 등급 업그레이드 시 사용자에게 자동으로 이메일을 발송합니다.

## 사용법

1. **사용자 추가**: `UserService`를 사용하여 새로운 사용자를 추가합니다.
2. **등급 업그레이드**: 일정 기준에 도달한 사용자는 `upgradeLevels()` 메서드를 통해 등급이 업그레이드됩니다.
3. **이메일 전송**: 등급이 업그레이드된 사용자에게 이메일 알림이 전송됩니다.


