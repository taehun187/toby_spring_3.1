# UserService Spring 프로젝트

## 개요
이 프로젝트는 **Spring Framework**를 사용하여 사용자 관리와 트랜잭션을 처리하는 예제입니다. JDBC와 트랜잭션 관리 기능을 구현하여 사용자 레벨을 관리하는 로직을 포함하고 있으며, 이를 통해 데이터베이스와의 상호작용과 비즈니스 로직을 캡슐화합니다.

## 주요 기능
- **DAO (Data Access Object)**: 사용자 정보를 데이터베이스에 추가, 수정, 삭제, 조회.
- **서비스 계층**: 사용자 레벨 업그레이드 로직 구현.
- **트랜잭션 관리**: `PlatformTransactionManager`를 이용하여 트랜잭션의 커밋/롤백을 처리.
- **JUnit5**: 서비스 기능에 대한 테스트 코드 포함.

## 클래스 구조

### UserDao & UserDaoJdbc
- 사용자 정보를 데이터베이스에서 처리하는 DAO 인터페이스와 JDBC 구현체입니다.
- `JdbcTemplate`을 사용하여 데이터베이스의 CRUD 작업을 수행합니다.

### UserService & UserServiceImpl
- **UserService**: 비즈니스 로직을 처리하는 인터페이스입니다.
- **UserServiceImpl**: 실제 사용자 추가 및 레벨 업그레이드를 처리하는 구현체입니다. 로그인 횟수와 추천 수에 따라 레벨을 업그레이드하는 로직을 가지고 있습니다.

### UserServiceTx
- 트랜잭션 관리 기능을 제공하는 서비스 클래스입니다.
- **`PlatformTransactionManager`**를 사용하여 `upgradeLevels()` 메소드 내에서 트랜잭션을 관리하며, 중간에 예외가 발생하면 롤백을 수행합니다.

### Level Enum
- **사용자 레벨**을 정의하는 Enum 클래스입니다.
- `BASIC`, `SILVER`, `GOLD`로 구성되며, 레벨 업그레이드 시 다음 레벨로의 전환을 제공합니다.

### DummyMailSender
- 메일 전송을 테스트하기 위한 **더미 클래스**입니다. 실제 메일 전송을 하지 않으며, 테스트 목적을 위한 목적으로 사용됩니다.

### TestServiceFactory
- 스프링 빈 설정을 위한 구성 클래스입니다.
- 데이터베이스 설정, 트랜잭션 매니저, DAO 및 서비스 빈을 정의합니다.

### UserServiceTest
- **JUnit5**를 사용한 테스트 클래스입니다.
- 사용자 레벨 업그레이드 및 트랜잭션 롤백이 정상적으로 작동하는지 확인하는 테스트를 포함합니다.

## 테스트 케이스
- **`upgradeLevels()`**: 사용자 레벨이 올바르게 업그레이드되는지 테스트합니다.
- **`add()`**: 사용자 추가 시 레벨이 지정되지 않으면 기본값인 `BASIC`으로 설정되는지 확인합니다.
- **`upgradeAllOrNothing()`**: 특정 사용자의 레벨 업그레이드 중 예외가 발생할 때 전체 트랜잭션이 롤백되는지 테스트합니다.

